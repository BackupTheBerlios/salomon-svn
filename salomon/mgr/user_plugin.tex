\section{Wtyczki}

Ca³a funkcjonalnoœæ zwi¹zana z~konfiguracj¹  przetwarzaniem, prezentacj¹ wyników dzia³ania oraz komunikacj¹ przez sieæ ukryta jest przed twórc¹ wtyczki i~nie musi byæ brana pod uwagê przy jego projektowaniu i~implementacji, wymagane
jest jedynie zaimplementowanie poni¿szych interfejsów.
By system móg³ skorzystaæ z~nowych wtyczek nale¿y 
podaæ ich lokalizacje, umo¿liwiaj¹c systemowi tym samym pobranie i~
za³adowanie wtyczki. Obecna wersja systemu obs³uguje tylko wtyczki w~postaci 
archiwów jar.

Poni¿y diagram (rys. \ref{fig:plugin_uml}) przedstawia podstawowe interfejsy
potrzebne do implementacji w³asnej wtyczki. Kolorem ¿ó³tym zaznaczone
zosta³y interfejsy zwi¹zane z~graficzn¹ czêœci¹ wtyczki. Kolorem niebieskim
interfejs, który zwi¹zany jest z~algorytmem wtyczki. 

\begin{figure}[H]
	\centering
		\includegraphics[width=0.90\textwidth]{img/salomon/uml/plugin.png}
	\caption{Interfejsy wtyczki}
	\label{fig:plugin_uml}
\end{figure}

G³ównym interfejsem implementowanym przez wszystkie wtyczki jest \emph{IPlugin}.
Stanowi po³¹czenie interfejsów \emph{IDataPlugin} i~\emph{IGraphicPlugin}
 
\subsection*{IDataPlugin}

Interfejs ten definiuje tylko jedn¹ metodê \emph{doJob()}, która jest uruchamiana podczas przetwarzania danej wtyczki i~stanowi jej g³ówne zadanie obliczeniowe. Jej parametry to:

\begin{itemize}
	\item \emph{IDataEngin}~(por. \ref{lab:data_engine}) -- obiekt ten dostarcza interfejsów pozwalaj¹cych na operowanie na danych i~wiedzy (np. ITreeManager)
 	\item \emph{IEnvironment} to~interfejs umo¿liwiaj¹cy komunikacje 
          pomiêdzy poszczególnymi zadaniami
	\item \emph{ISettings} reprezentujê konfiguracja wejœciowa wtyczki
\end{itemize}  
    
\subsection*{IGraphicPlugin}
Interfejs ten okreœla sposób, w~jaki wtyczka mo¿e byæ konfigurowana przez u¿ytkownika oraz jak maj¹ byæ prezentowane wyniki obliczeñ. 
\begin{itemize}
	\item \emph{getSettingComponent()} -- zwraca obiekt implementuj¹cy interfejs 
		\emph{ISettingComponent}
	\item \emph{getResultComponent()} -- zwraca obiekt implementuj¹cy interfejs 
		\emph{IResultComponent}
\end{itemize}

\subsection*{ISettingComponent}
\begin{itemize}
	\item \emph{getComponent(ISettings settings)} -- zwraca graficzny komponent 
s³u¿¹cy do edycji ustawieñ wtyczki. Jest on wype³niany wartoœciami przekazanymi 
w obiekcie \emph{ISettings}.
	\item \emph{getSettings()} -- zwraca ustawienia wtyczki.
	\item \emph{getDefaultSettings()} -- zwraca domyœlne ustawienia wtyczki. 
Wykorzystywane, gdy u¿ytkownik nie wprowadzi³ w³asnych ustawieñ.
\end{itemize}    

\subsection*{IResultComponent}
\begin{itemize}
	\item \emph{getComponent(IResult result)} -- zwraca graficzny komponent 
wyœwietlaj¹cy rezultat wykonania wtyczki. Wype³niany jest on na podstawie 
obiektu  \emph{IResult} zwróconego wczeœniej przez metodê \emph{doJob()}.
	\item  \emph{getDefaultResult()} -- zwraca domyœlny rezultat wykonania wtyczki.
\end{itemize}

Do komunikacji pomiêdzy wtyczkami a~platform¹ wykorzystywane s¹
interfejsy \emph{ISettings} i~\emph{IResult}. Definiuj¹ one odpowiednio
konfiguracje oraz rezultat pracy wtyczki.

%WSTAWIÆ TO W~JAKIEŒ MIEJSCE!!!
%
%\paragraph{Persystencja danych}
%Z racji na rozproszony charakter aplikacji, oraz na wielkoœæ obliczeñ.
%Wa¿nym aspektem platformy jest zapewnienie uniwersalnego i~wydajnego
%mechanizmu persysteñcji danych. W~przypadku wewnêtrznych struktur danych,
%jak zapis drzewa decyzyjnego, czy atrybutów, zadaniem tym zajmuj¹ siê
%odpowiednie menadzêry. W~przypadku jednak persystencji danych u¿ytkownika,
%takich jak ustawienia wtyczek, czy ich rezultaty zadaniem tym zajmujê siê
%modu³ persysteñcji, udostêpniaj¹cy odpowiedni \emph{API}. Dodatkowo mechanizm
%ten jest wykorzystywany do persystencji danych wykorzystywanych w~komunikacji miêdzy kolejnymi zadaniami (WSTAWIÆ LINKA DO OPISU ENV.)
%
%Kod poni¿ej tworzy strukturê, z~jednym polem o~nazwie ,,myField'' oraz przypisuje do niego wartoœæ ,,my settings''.
%
%\begin{lstlisting}
%SimpleStruct struct = new SimpleStruct();
%struct.setField("myField", "my settings");
%\end{lstlisting}
%
%WSTAWIÆ UML? 


